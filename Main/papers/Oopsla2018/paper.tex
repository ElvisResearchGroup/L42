%% For double-blind review submission, w/o CCS and ACM Reference (max submission space)
\documentclass[acmsmall,review,anonymous]{acmart}\settopmatter{printfolios=true,printccs=false,printacmref=false}
%% For double-blind review submission, w/ CCS and ACM Reference
%\documentclass[acmsmall,review,anonymous]{acmart}\settopmatter{printfolios=true}
%% For single-blind review submission, w/o CCS and ACM Reference (max submission space)
%\documentclass[acmsmall,review]{acmart}\settopmatter{printfolios=true,printccs=false,printacmref=false}
%% For single-blind review submission, w/ CCS and ACM Reference
%\documentclass[acmsmall,review]{acmart}\settopmatter{printfolios=true}
%% For final camera-ready submission, w/ required CCS and ACM Reference
%\documentclass[acmsmall]{acmart}\settopmatter{}


%% Journal information
%% Supplied to authors by publisher for camera-ready submission;
%% use defaults for review submission.
\acmJournal{PACMPL}
\acmVolume{1}
\acmNumber{CONF} % CONF = POPL or ICFP or OOPSLA
\acmArticle{1}
\acmYear{2018}
\acmMonth{1}
\acmDOI{} % \acmDOI{10.1145/nnnnnnn.nnnnnnn}
\startPage{1}

%% Copyright information
%% Supplied to authors (based on authors' rights management selection;
%% see authors.acm.org) by publisher for camera-ready submission;
%% use 'none' for review submission.
\setcopyright{none}
%\setcopyright{acmcopyright}
%\setcopyright{acmlicensed}
%\setcopyright{rightsretained}
%\copyrightyear{2018}           %% If different from \acmYear

%% Bibliography style
\bibliographystyle{ACM-Reference-Format}
%% Citation style
%% Note: author/year citations are required for papers published as an
%% issue of PACMPL.
\citestyle{acmauthoryear}   %% For author/year citations


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Note: Authors migrating a paper from PACMPL format to traditional
%% SIGPLAN proceedings format must update the '\documentclass' and
%% topmatter commands above; see 'acmart-sigplanproc-template.tex'.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%% Some recommended packages.
\usepackage{url}
\usepackage{mathpartir}
\usepackage{mathtools}
\usepackage{listings}
\usepackage{color}
\usepackage{xspace}
\usepackage{times}%is this making all the font into times?
\usepackage{comment}
\usepackage{rotating} 
\usepackage[T1]{fontenc}
\usepackage{enumitem}
\setlist{nosep}
\setlist{leftmargin=1ex}
\setlist[itemize]{noitemsep,nolistsep}
\setlist[enumerate]{noitemsep,nolistsep}
%\let\oldparagraph\paragraph
%\renewcommand{\paragraph}[1]{\vspace{-5pt}\oldparagraph{#1}}
\renewcommand{\paragraph}[1]{\noindent{\bf #1}}

\let\oldsubsection\subsection
\renewcommand{\subsection}[1]{\vspace{-4pt}\oldsubsection{#1}\vspace{-4pt}}

%\newenvironment{listing}{\vspace{-3pt}\begin{lstlisting}}{\end{lstlisting}\vspace{-3pt}}
%
\lstset{language=Java,
  basicstyle=\ttfamily\footnotesize,%\small,%\scriptsize,
  keywordstyle=\bfseries,%\color{darkRed},
  showstringspaces=false,
  mathescape=true,
  xleftmargin=0pt,
  xrightmargin=0pt,
  breaklines=false,
  breakatwhitespace=false,
  breakautoindent=false,
  %linewidth=4\textwidth,% should be enough
%  identifierstyle=\idstyle
 morekeywords={method,Use,This,constructor,as,into,rename},
 deletekeywords={double}
}
%
%\newcommand\saveSpace{}
\newcommand\saveSpace{\vspace{-2pt}}

\newcommand\Rotated[1]{\begin{turn}{90}\begin{minipage}{10em}#1\end{minipage}\end{turn}}
%
%marco
\newcommand{\Q}{\lstinline}
\newcommand\Opt[1]{#1 ?}
%bnf
\newenvironment{bnf}{$\begin{array}{lcll}}{\end{array}$}
\newcommand{\prodFull}[3]{#1&::=&#2&\mbox{#3}}
%\newcommand{\prodFull}[3]{#1&::=&\mbox{#2}&\mbox{#3}}
\newcommand{\prodInline}[2]{#1::=#2}
\newcommand{\prodNextLine}[2]{&&#1&\mbox{#2}}
\newcommand{\terminal}[1]{%
\ensuremath{$\texttt{#1}$}%
}
\newcommand{\terminalCode}[1]{\mbox{\lstinline{#1}}}
\newcommand{\metavariable}[1]{%
\ensuremath{\mathit{#1}}%
}
%----------------------
\newcommand\dom{\text{dom}}
\newcommand*{\Scale}[2][4]{\scalebox{#1}{$#2$}}%
\newcommand\smallDs{{\Scale[0.5]{\overline{\mD}}}}
\newcommand\vds{{v_{\smallDs}}}
\newcommand\Rulename[1]{{\textsc{#1}}}
\newcommand\ctx{{\mathcal{E}}}
\newcommand\mID{\metavariable{ID}}
\newcommand\mL{\metavariable{L}}
\newcommand\mE{\metavariable{E}}
\newcommand\mC{\metavariable{C}}
\newcommand\mT{\metavariable{T}}
\newcommand\mV{\metavariable{V}} %code value t or L
\newcommand\mM{\metavariable{M}}
\newcommand\mG{\Gamma}
\newcommand\mDE{\metavariable{DE}}
\newcommand\mTE{\metavariable{TE}}
\newcommand\mCE{\metavariable{CE}}
\newcommand\mMD{\metavariable{MD}}
\newcommand\mTD{\metavariable{TD}}
\newcommand\mCD{\metavariable{CD}}
\newcommand\mD{\metavariable{D}}
\newcommand\me{\metavariable{e}}
\newcommand\mx{\metavariable{x}}
\newcommand\mm{\metavariable{m}}
\newcommand\mt{\metavariable{t}}
\newcommand\use{\terminalCode{Use}}
\newcommand\oC{\mbox{\lstinline@\{@}}
\newcommand\cC{\mbox{\lstinline@\}@}}
\newcommand\oR{\mbox{\lstinline@(@}}
\newcommand\cR{\mbox{\lstinline@)@}}
%--------------------------
\newcommand{\mynotes}[3]{{\color{#2} {\sc #1}: #3}}
\newcommand\bruno[1]{\mynotes{Bruno}{red}{#1}}
\newcommand\marco[1]{\mynotes{Marco}{blue}{#1}}

\newcommand{\syndef}{$::=$}

\newcommand\name{{\bf $42_{\mu}$}\xspace}

\begin{document}

%% Title information
\title{Separating Use and Reuse to Improve Both}         %% [Short Title] is optional;
                                        %% when present, will be used in
                                        %% header instead of Full Title.
%\titlenote{Separating Use and Reuse to Improve Both}             %% \titlenote is optional;
                                        %% can be repeated if necessary;
                                        %% contents suppressed with 'anonymous'
%\subtitle{Subtitle}                     %% \subtitle is optional
%\subtitlenote{with subtitle note}       %% \subtitlenote is optional;
                                        %% can be repeated if necessary;
                                        %% contents suppressed with 'anonymous'


%% Author information
%% Contents and number of authors suppressed with 'anonymous'.
%% Each author should be introduced by \author, followed by
%% \authornote (optional), \orcid (optional), \affiliation, and
%% \email.
%% An author may have multiple affiliations and/or emails; repeat the
%% appropriate command.
%% Many elements are not rendered, but should be provided for metadata
%% extraction tools.

%% Author with single affiliation.
\author{Marco Servetto}
%\authornote{with author1 note}          %% \authornote is optional;
                                        %% can be repeated if necessary
%\orcid{nnnn-nnnn-nnnn-nnnn}             %% \orcid is optional
\affiliation{
 % \position{Position1}
%  \department{Department1}              %% \department is recommended
  \institution{Victoria University of Wellington}            %% \institution is required
%  \streetaddress{Street1 Address1}
 % \city{City1}
 % \state{State1}
 % \postcode{Post-Code1}
  \country{New Zealand}                    %% \country is recommended
}
\email{marco.servetto@ecs.vuw.ac.nz}          %% \email is recommended

%Arora
\author{Hrshikesh Arora}
\affiliation{
  \institution{Victoria University of Wellington}      
  \country{New Zealand} 
}
\email{arorahrsh@ecs.vuw.ac.nz}

%Bruno
\author{Bruno C. d. S. Oliveira}
\affiliation{
  \institution{The University of Hong Kong}      
  \country{Hong Kong} 
}
\email{bruno@cs.hku.hk}  



%% Abstract
%% Note: \begin{abstract}...\end{abstract} environment must come
%% before \maketitle command
\begin{abstract}
\saveSpace\saveSpace\saveSpace
In most OO languages subclassing/inheritance implies
subtyping. This is considered by many a design error, but it
seems required for technical reasons, due to what we call the
\emph{this-leaking problem}, showing that separating
inheritance from subtyping is non-trivial and requires a significant
departure from the OO models in existing mainstream OO languages.
We are aware of at least 3 independently designed research languages 
addressing this limitation: \emph{TraitRecordJ}, \emph{Package Templates} and \emph{DeepFJig}.
The goal of this paper is to synthesize and improve on
the main ideas of those very different designs into a nominally typed
minimalist language, called \name.
By making our type system \textbf{distinguish between code-use and code-reuse}
we can separate inheritance and subtyping, while avoiding 
redundant abstract declarations required in TraitRecordJ and
DeepFJig. At the same time \emph{self construction},
\emph{binary methods} and \emph{recursive types} are also supported.
Moreover, we provide a novel and elegant solution to \textbf{uniformly
handling behaviour and state} within trait composition and without the need of glue-code.
These ideas have been implemented in the full 42 language, 
supporting all the examples shown in this paper.
%EVALUATION
We depict the logical simplicity of our model through an elegant and compact (one page) formal calculus.
We also evaluate our design over three case studies comparing 42 with languages where use and reuse are connected, like Java and Scala.
\saveSpace\saveSpace

\keywords{Code Reuse, Object-Oriented Programming}
\saveSpace\saveSpace
\end{abstract}


%% 2012 ACM Computing Classification System (CSS) concepts
%% Generate at 'http://dl.acm.org/ccs/ccs.cfm'.
%\begin{CCSXML}
%<ccs2012>
%<concept>
%<concept_id>10011007.10011006.10011008</concept_id>
%<concept_desc>Software and its engineering~General programming languages</concept_desc>
%<concept_significance>500</concept_significance>
%</concept>
%<concept>
%<concept_id>10003456.10003457.10003521.10003525</concept_id>
%<concept_desc>Social and professional topics~History of programming languages</concept_desc>
%<concept_significance>300</concept_significance>
%</concept>
%</ccs2012>
%\end{CCSXML}

%\ccsdesc[500]{Software and its engineering~General programming languages}
%\ccsdesc[300]{Social and professional topics~History of programming languages}
%% End of generated code


%% Keywords
%% comma separated list
% \keywords{keyword1, keyword2, keyword3}  %% \keywords are mandatory in final camera-ready submission


%% \maketitle
%% Note: \maketitle command must come after title commands, author
%% commands, abstract environment, Computing Classification System
%% environment and commands, and keywords command.
\maketitle

\input{Intro}
\input{section2}
\input{section3}
\input{section4}
\input{Extensions}
\input{Examples}
\input{RelatedWork}
\input{Conclusion}

%% Acknowledgments
%\begin{acks}                            %% acks environment is optional
%                                        %% contents suppressed with 'anonymous'
%  %% Commands \grantsponsor{<sponsorID>}{<name>}{<url>} and
%  %% \grantnum[<url>]{<sponsorID>}{<number>} should be used to
%  %% acknowledge financial support and will be used by metadata
%  %% extraction tools.
%  This material is based upon work supported by the
%  \grantsponsor{GS100000001}{National Science
%    Foundation}{http://dx.doi.org/10.13039/100000001} under Grant
%  No.~\grantnum{GS100000001}{nnnnnnn} and Grant
%  No.~\grantnum{GS100000001}{mmmmmmm}.  Any opinions, findings, and
%  conclusions or recommendations expressed in this material are those
%  of the author and do not necessarily reflect the views of the
%  National Science Foundation.
%\end{acks}


%% Bibliography
%\bibliography{bibfile}
\bibliography{main}

%% Appendix
\appendix
\input{appendix}

\end{document}
