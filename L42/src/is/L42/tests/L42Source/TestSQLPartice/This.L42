reuse [AdamTowel]

LoadJ=Load:{reuse[JavaServer]}
GuiJ=LoadJ(slaveName=S"miniGuiSlave{}")
DbJ=LoadJ(slaveName=S"dbServer{}")
LoadDB=Load:{reuse[DB]}
DB=LoadDB(S"jdbc:derby:PersonsGui;create=true",javaServer=DbJ)

JavaCode={...}

Model=Data:GuiJ.Handler:{
  mut GuiJ j
  @GuiJ.Handler mut method Void printAll(S msg)=(void)
  @GuiJ.Handler mut method Void addPerson(S msg)=(
    this.#j().submitEvent(key='MiniGuiInput, id='Button, msg='AddBang)
    whoops GuiJ.Fail
    )
  }
/*Main=(
  j=GuiJ.#$of()
  j.loadCode(fullName=S"miniGui.MiniGui",code=JavaCode())
  model=Model(j=j)
  void
  )
*/
Person=Data:{S name, Size age, Size height, Size weight}
Persons=Collection.list(Person)

Queries=DB.QueryBox:{
  @Public Insert=DB.query[Void;S;Size;Size;Size]"""
    |INSERT INTO Person (name,age,height,weight)
    |Values (@name,@age,@height,@weight)
    """
  @Public All=DB.query[Persons]"SELECT * FROM Person"
  }
SetUp={...}
Table=DB.#$of().tables()
Main=(
  q=Queries(DB.#$of())
  q.insert()(name='Bob, age=15\ height=165\ weight=67\)
  Debug(q.all()())
  )
TearDown={...}