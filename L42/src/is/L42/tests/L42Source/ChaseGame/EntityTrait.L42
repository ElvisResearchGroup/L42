[Map.Entity]
MyAI={[AI]}
var MyAI ai
method ping(that)=(
  pulse=this.ai()(that,r=that.#r())
  k=this.kind()
  s=this.speed()
  if pulse.power() == 0Double (
    this.speed(s+Vector(x=s.x()*k.break(),y=s.y()*k.break()))
    )
  else (
    this.speed(s.sum(rad=pulse.rad(),power=k.acc(),max=k.topSpeed()))
    )
  this.pos(\pos+\speed)
  )
method paint()={
  p=this.pos()
  k=this.kind()
  x=p.x()
  y=p.y()
  res=S"%x.ceil();%y.ceil();%k.radius().ceil();0;%k.img()"
  if this.text()==S"" return res
  xr=x+(k.radius()/2Double)
  yr=y-(k.radius()/2Double)
  res2=S"%xr.ceil();%yr.ceil();%k.radius().ceil();0;text:%this.text()"
  return res++S.nl()++res2
  }