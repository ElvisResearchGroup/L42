class method S gameScreen(mut Gui that)=(
  reset=that.button(id=S"reset",msg='Pressed,text=S"Reset")
  S"""%
    |JPanel gameScreen=new JPanel();
    |JPanel gameControls=new JPanel();
    |%reset
    |JLabel points=new JLabel("Points=0");
    |PaintEntities paintable=new PaintEntities(){
    |  @Override public void submit(String n,String e,boolean r){
    |    super.submit(n,e,r);
    |    this.setFocusable(true);
    |    this.requestFocusInWindow();
    |    }
    |  @Override public void draw(java.awt.Graphics2D g,PaintEntities.Entity e){
    |    var r=e.radius();
    |    if (!e.imgUrl().startsWith("text:")){
    |      g.fillOval(e.x()-r,e.y()-r,r*2,r*2);
    |      super.draw(g,e);
    |      return;
    |      }
    |    var txt=e.imgUrl().substring(5);
    |    g.drawString(txt, e.x(), e.y());
    |    }
    |  };
    |{
    |  paintable.addKeyListener(new BindKeys(event,"Example","pressed","released","typed"));
    |  event.registerEvent("Example.RefreshEntities",(k,id,msg)->
    |    paintable.submit(id,msg,true));
    |  event.registerEvent("Example.GameScreen",(k,id,msg)->
    |    javax.swing.SwingUtilities.invokeLater(()->gameScreen(msg)));
    |  event.registerEvent("Example.StartScreen",(k,id,msg)->
    |    javax.swing.SwingUtilities.invokeLater(()->startScreen(msg)));
    |  event.registerEvent("Example.ChangePoints",(k,id,msg)->
    |    javax.swing.SwingUtilities.invokeLater(()->points(msg)));
    |  addNorth(gameControls,reset);
    |  addSouth(gameControls,points);
    |  addCenter(gameScreen,paintable);
    |  addEast(gameScreen,gameControls);
    |  }
    |void points(String s){points.setText("Points="+s);}
    |void gameScreen(String s){
    |  points(s);
    |  getContentPane().removeAll();
    |  getContentPane().add(gameScreen);
    |  repaint();
    |  setVisible(true);
    |  }
  """
  )
class method S startScreen(mut Gui that)=(
  start=that.button(id=S"start",msg='Pressed,text=S"Start")
  S"""%
    |JPanel startScreen=new JPanel();
    |%start
    |JLabel title=new JLabel("        Rattype!");
    |JPanel startControls=new JPanel();
    |{
    |  addNorth(startControls,start);
    |  addCenter(startScreen,title);
    |  addEast(startScreen,startControls);
    |  }
    |void startScreen(String s){
    |  title.setText("        Rattype!    "+s);
    |  getContentPane().removeAll();
    |  getContentPane().add(startScreen);
    |  repaint();
    |  setVisible(true);
    |  }
  """
  )