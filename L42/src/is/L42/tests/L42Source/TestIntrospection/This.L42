reuse[AdamTowel]

ExampleAnn={@{exampleAnn}}

TestMeth=(
  lib={ method Void foo(S that)=void  method B bar() B={}}
  n=Introspection.Nested.from(library=lib)
  b=n.nesteds().val(0Size)
  foo=n.methods().val(0\)
  bar=n.methods().val(1\)
  b2=bar.returnType().nested()
  {}:Test"self1String"(expected=b actual=b2)
  //{}:Test"self1"(b.nameFromRoot()==b2.nameFromRoot())
  {}:Test"self1"(b==b2)
  {}:Test"self2"(n!=b2)
  )
TestAnn=(
  lib={ @ExampleAnn B={method Void foo(S that)=void}}
  n=Introspection.Nested.from(library=lib).nesteds().val(0Size)
  clazz=n.outerDoc().docs().left().nested()
  s=clazz.innerDoc().docs().left().texts().left()
  {}:Test"0"(expected=S"exampleAnn", actual=s)
  )
TestFromLib=(
  lib={method Void foo(S that)=void @{hi} B={method Void foo(S that)=void}}
  {}:Test"1"(
    actual=Introspection.Nested.from(library=lib)
    expected=S"""
      |{ foo(that)=(..) B={..} }
      |
      |File name:[###]/TestIntrospection/This.L42
      |Line:[###]
      |Column:[###]
      """.trim())
  n=Introspection.Nested.from(library=lib).nesteds().val(0Size)      
  {}:Test"2"(actual=n
    expected=S"""
      |{ foo(that)=(..) }
      |
      |File name:[###]/TestIntrospection/This.L42
      |Line:[###]
      |Column:[###]
      """.trim())
  {}:Test"3"(actual=Introspection.Nested.from(library=lib).nesteds(),
    expected=S"""
      |Introspection.Nesteds[Introspection.Nested(i="{ foo(that)=(..) }\n\nFile name:[###]")]
      """.trim())
  {}:Test"4"(actual=n.outerName(), expected=S"B")
  {}:Test"5"(actual=n.outerDoc(), expected=S"@{@{hi}}")
  )