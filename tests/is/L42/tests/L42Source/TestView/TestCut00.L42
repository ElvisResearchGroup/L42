AView=View(AList).cut()
SView=View(ASet).cut()
MView=View(AMap).cut()

MainM=(
  mut v=AView(Make.mList())
  ,(acc=S.StringBuilder()( for mut a in v \add(a.that()) )
  {}:Test"visit000"(actual=acc,expected=S"12345678")
  )(acc=S.StringBuilder()( for mut a in v.#vals(1I to=5I) \add(a.that()) )
  {}:Test"vals15_000"(actual=acc,expected=S"2345")
  )(acc=S.StringBuilder()( for mut a in v.#vals(1I to=5I).#vals(2I) \add(a.that()) )
  {}:Test"subValsFrom_000"(actual=acc,expected=S"45")
  )(acc=S.StringBuilder()( for mut a in v.#vals(1I to=5I).#vals(to=3I) \add(a.that()) )
  {}:Test"subValsTo_000"(actual=acc,expected=S"234")
  )(acc=S.StringBuilder()( for read a in v.vals(1I to=5I) \add(a.that()) )
  {}:Test"valsRead_000"(actual=acc,expected=S"2345")
  )(
  for var mut a in v a:=\(10I+a.that())
  acc=S.StringBuilder()( for mut a in v \add(a.that()) )
  {}:Test"updateMut_000"(actual=acc,expected=S"1112131415161718")
  )(
  acc=S.StringBuilder()( for mut a in v, r in Range(4I) \add(a.that()) )
  {}:Test"cutStopsOk_000"(actual=acc,expected=S"11121314")
  ))
MainI=(
  mut v=AView(Make.iList())
  ,(acc=S.StringBuilder()( for a in v \add(a.that()) )
  {}:Test"visit000"(actual=acc,expected=S"12345678")
  )(acc=S.StringBuilder()( for a in v.vals(1I to=5I) \add(a.that()) )
  {}:Test"vals15_000"(actual=acc,expected=S"2345")
  )(acc=S.StringBuilder()( for a in v.vals(1I to=5I).vals(2I) \add(a.that()) )
  {}:Test"subValsFrom_000"(actual=acc,expected=S"45")
  )(acc=S.StringBuilder()( for a in v.vals(1I to=5I).vals(to=3I) \add(a.that()) )
  {}:Test"subValsTo_000"(actual=acc,expected=S"234")
  )(acc=S.StringBuilder()( for read a in v.vals(1I to=5I) \add(a.that()) )
  {}:Test"valsRead_000"(actual=acc,expected=S"2345")
  )(for var a in v a:=\(10I+a.that())
  acc=S.StringBuilder()( for a in v \add(a.that()) )
  {}:Test"updateMut_000"(actual=acc,expected=S"1112131415161718")
  )(
  v.left(v.right())//checks that they are now imm and that gettes/setters are working
  acc=S.StringBuilder()( for a in v \add(a.that()) )
  {}:Test"updateMut_000"(actual=acc,expected=S"1812131415161718")
  ))
MainMix=(
  mut v=AView(Make.mixList())
  ,(acc=S.StringBuilder()( for read a in v \add(a.that()) )
  {}:Test"visit000"(actual=acc,expected=S"12345678")
  )(acc=S.StringBuilder()( for read a in v.vals(1I to=5I) \add(a.that()) )
  {}:Test"vals15_000"(actual=acc,expected=S"2345")
  ))
MainSet=(
  mut v=SView(Make.set())
  ,(acc=S.StringBuilder()( for read a in v \add(a.that()) )
  {}:Test"setVisit000"(actual=acc,expected=S"12345678")
  )(acc=S.StringBuilder()( for read a in v.vals(1I to=5I) \add(a.that()) )
  {}:Test"vals15_000"(actual=acc,expected=S"2345")
  {}:Test"vals3Left_000"(actual=v.vals(2I).left(), expected=S"A(3)")
  )(acc=S.StringBuilder()( for read a in v,r in Range(3I) \add(a.that()) )
  {}:Test"cutSetOk_000"(actual=acc, expected=S"123")
  ))
MainMap=(
  mut v=MView(Make.map())
  ,(acc=S.StringBuilder()( for (key,val) in v \add(val.that()) )
  {}:Test"setVisit000"(actual=acc,expected=S"12345678")
  )(acc=S.StringBuilder()( for (key,val) in v.vals(1I to=5I) \add(val.that()) )
  {}:Test"vals15_000"(actual=acc,expected=S"2345")
  {}:Test"vals3Left_000"(actual=v.vals(2I).left().val(), expected=S"A(3)")
  )(acc=S.StringBuilder()( for read a in v,r in Range(3I) \add(a.val().that()) )
  {}:Test"cutMapOk_000"(actual=acc, expected=S"123")
  ))

