mut Clients clients
class method fwd mut This (fwd mut Counter$ that)
mut method mut Client$ client(I id)
   = this.#clients().#val(id)//note: unused also in the original example
mut method mut Client$ client(S address) = {
  for mut c in this.#clients() ( if Client(c)<:mut Client.name()<:S == address return c )
  error X"Receiver %address Unknown"
  }
mut method Void resetClients() = while !this.#clients().isEmpty() this.#clients().removeRight()
mut method mut Client create(S name, @Top I privateKey, Bool autoResponse) = (
  size = this.#clients().size()
  mut Client client  =  Client(
    id = size, name = name,keyring = Keyring(), privateKey = privateKey,
    autoResponse = autoResponse,addressBook = AddressBook(), forwardReceiver = OptClient(),
    static = this)
  this.#clients().#add(right = client)
  client
  )
class method mut This(I emails,mut Clients clients)
class method mut This() = This(emails = 0\,clients = \())
mut method Void example() = (
  mut Client client1  =  this.create(name = S"Malte", privateKey = 5\, autoResponse = Bool.false()) // ok
  mut Client client2  =  this.create(name = S"Sebastian", privateKey = 7\,autoResponse = Bool.true()) // ok
  mut Client client3  =  this.create(name = S"Tim", privateKey = 3\, autoResponse = Bool.false()) // ok
  client1.addAddressbookEntry(alias = S"seb",receiver = S"Sebastian") // ok
  client1.addKeyringEntry(client = client2, publicKey = 7I)
  client1.addKeyringEntry(client = client3, publicKey = 3I)
  client2.addKeyringEntry(client = client1, publicKey = 5I)
  client2.addKeyringEntry(client = client3, publicKey = 3I)
  client3.addKeyringEntry(client = client2, publicKey = 7I)
  sebAlias = client1.getAddressBookReceivers(alias = S"seb")
  Debug(S"Addressbook entry: %sebAlias") // ok
  client2.forwardReceiver(OptClient(client3.self())) //ok
  client1.sendEmail(receiverAddress = S"Sebastian", subject = S"Email1", body = S"Hallo, das ist die erste Mail")  // ok
  Debug(S"Forwarded by client2: %client2.forwardReceiver()") // ok
  Debug(client1.getAddressBookReceivers(alias = S"seb")) // ok
  this.resetClients() // ok
  )