using System;
using Microsoft.Contracts;
using System.Collections.Generic;

internal class MainC
{
	// Note: I have split up the Main method into several functions (events, makeA...) etc, since otherwise boogie takes an incredibley long time to verify this file.

	private static SafeMovable makeC() 
	{
		List<Gui.Widget> list = new List<Gui.Widget>();
		Owner.AssignSame(list, Owner.ElementProxy(list));
		return new SafeMovable("C", 6, 6, 32, 32, "black", list);
	}
	private static SafeMovable makeB()
	{
		List<Gui.Widget> list = new List<Gui.Widget>{makeC()};
		Owner.AssignSame(list, Owner.ElementProxy(list));
		return new SafeMovable("B", 50, 50, 128, 128, "blue", list);
	}
	private static SafeMovable makeD()
	{
		List<Gui.Widget> list = new List<Gui.Widget>();
		Owner.AssignSame(list, Owner.ElementProxy(list));
		return new SafeMovable("D", 280, 280, 64, 64, "blue", list);
	}
	private static SafeMovable makeA() 
	{
		List<Gui.Widget> list = new List<Gui.Widget>{makeD(), makeB()};
		Owner.AssignSame(list, Owner.ElementProxy(list));
		return new SafeMovable("A", 20, 40, 640, 640, "red", list);
	}

	private static SafeMovable make()
	{
		List<Gui.Widget> list = new List<Gui.Widget>{makeA()};
		Owner.AssignSame(list, Owner.ElementProxy(list));
		return new SafeMovable(700, 700, "green", new Box("Green", list, 2, 2));
	}

	private static string[] events() 
	{ 
		return new string[] {
			"A_Left::Pressed::_",
			"A_Right::Pressed::_",
			"A_Up::Pressed::_",
			"A_Down::Pressed::_",

			"B_Left::Pressed::_",
			"B_Right::Pressed::_",
			"B_Up::Pressed::_",
			"B_Down::Pressed::_",

			"C_Left::Pressed::_",
			"C_Right::Pressed::_",
			"C_Up::Pressed::_",
			"C_Down::Pressed::_",

			"D_Left::Pressed::_",
			"D_Right::Pressed::_",
			"D_Up::Pressed::_",
			"D_Down::Pressed::_",
			"EXIT"
		};
	}

	internal static void Main(string[] args)
	{
		SafeMovable w = make();
		new Gui("a1").display("Moving", 800, 800, w, events());
		Gui.Debug("#@Success@#");
		Console.Read();
	}
}
